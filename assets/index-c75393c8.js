(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}})();const l="https://api.artic.edu",u="/api/v1/artworks",p=async(a,r={})=>{try{const t=await fetch(a,r),{ok:o,status:e,statusText:n}=t;if(!o)throw new Error(`Fetch failed: ${e}, ${n||"no statusText"}`);return[null,await t.json()]}catch(t){return console.warn(t.message),[t,null]}},f=async(a="landscape",r=15)=>{const t=new URL(l);t.pathname=`${u}/search`,t.searchParams.append("q",a),t.searchParams.append("limit",r),t.searchParams.append("query[term][is_public_domain]","true"),t.searchParams.append("fields","id,title,image_id,artwork_type_title");const[o,e]=await p(t);return o?[]:e.data},m=async a=>{const[r,t]=await p(`${l}${u}/${a}`);return r?[]:t.data},h=a=>(a.innerHTML=`
    <h1>ArtViewer App</h1>
    <div id="paintings">
      <h2>Paintings</h2>
      <div id="paintings-container"></div>
    </div>
  `,{paintingsContainer:document.getElementById("paintings-container")}),g=(a,r,t=400)=>{const o=new Set;r.forEach(({title:e,image_id:n,artwork_type_title:s})=>{if(s!=="Painting"||o.has(e.toLowerCase()))return;o.add(e.toLowerCase());const i=document.createElement("div");i.classList.add("painting-card");const d=document.createElement("h3");d.textContent=e;const c=document.createElement("img");c.src=`https://www.artic.edu/iiif/2/${n}/full/${t},/0/default.jpg`,c.addEventListener("error",()=>i.remove()),i.append(d,c),a.append(i)})};async function w(a){const{paintingsContainer:r}=h(a),t=await f();console.log("Fetch #1, list"),console.table(t);const o=await m(t[0].id);console.log("Fetch #2, single"),console.log(o),g(r,t)}const y=document.querySelector("main");w(y);
